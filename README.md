# git-flow から github-flow への移行手順書

**1. 事前準備**

* **チームへの周知:**
    * 移行の目的、手順、スケジュールをチームメンバーに共有します。
    * 新しいワークフロー（`github-flow`）について説明し、質問を受け付けます。
* **既存ブランチの確認:**
    * `feature`、`release`、`hotfix` などのブランチが残っている場合は、それぞれの状況を確認し、対応を検討します。
    * 不要なブランチは削除、必要な変更は `main` ブランチへマージします。
* **CI/CD パイプラインの確認:**
    * `develop` ブランチをトリガーとしている CI/CD パイプラインがある場合は、`main` ブランチをトリガーとするように修正計画を立てます。

**2. develop ブランチの削除**

* **ローカルリポジトリでの削除:**
    * ターミナルを開き、ローカルリポジトリのディレクトリに移動します。
    * 以下のコマンドを実行して、`develop` ブランチを削除します。

    ```bash
    git branch -d develop
    ```

* **リモートリポジトリでの削除:**
    * 以下のコマンドを実行して、リモートの `develop` ブランチを削除します。

    ```bash
    git push origin --delete develop
    ```

**3. デフォルトブランチの変更**

* **GitHub での設定変更:**
    * GitHub のリポジトリページを開きます。
    * 「Settings」タブをクリックします。
    * 「Branches」セクションを開きます。
    * 「Default branch」を `main` に変更し、「Update」をクリックします。

**4. 既存ブランチの main ブランチへのマージ**

* もし、featureブランチなど、mainブランチに取り込みたい変更がある場合は、各ブランチからmainブランチへプルリクエストを作成し、マージします。

**5. 機能ブランチの作成**

* `github-flow` では、新しい機能や修正を行う際に、`main` ブランチから機能ブランチを作成します。
* 以下のコマンドを実行して、機能ブランチを作成します。

    ```bash
    git checkout -b feature/新しい機能名
    ```

    * `feature/新しい機能名` は、機能ブランチの名前です。機能の内容が分かりやすい名前を付けましょう。
* 機能ブランチで作業を行い、コミットします。
* 作業が完了したら、リモートリポジトリに機能ブランチをプッシュします。

    ```bash
    git push origin feature/新しい機能名
    ```

**6. CI/CD パイプラインの修正**

* CI/CD ツール（例：GitHub Actions、CircleCI）の設定ファイルを修正し、`main` ブランチへのプッシュをトリガーとするように変更します。

**7. チームへの周知とワークフローの定着**

* 変更後のワークフロー（`github-flow`）をチームに再周知します。
* プルリクエストの作成、レビュー、マージの手順を確認します。
* 必要に応じて、ワークフローに関するドキュメントを更新します。

**8. 移行後の運用**

* `github-flow` に基づき、`main` ブランチから機能ブランチを作成し、プルリクエストを通じて変更を `main` ブランチに統合します。
* `main` ブランチへの直接コミットは避け、プルリクエストによるコードレビューを徹底します。
* タグ付けは、リリース時に `main` ブランチに対して行います。

**補足**

* 上記手順は一般的な例であり、チームの状況に合わせて適宜変更してください。
* 移行作業は、影響範囲を最小限に抑えるため、業務時間外に行うことを推奨します。
* 移行後しばらくは、チームメンバーからの質問やトラブルシューティングに対応できるように、サポート体制を整えてください。